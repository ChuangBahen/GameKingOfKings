# 套裝系統與裝備掉落機制 遊戲設計

> 📅 設計日期: 2025-12-30
> 🎮 設計者: game-designer agent

## 設計概述
- **功能定位**: 增加裝備收集的深度和怪物擊殺的獎勵感
- **設計目標**:
  1. 讓玩家有「收集套裝」的長期目標
  2. 讓普通怪物也有刷裝備的可能（極低機率），增加驚喜感
  3. Boss 保持高價值裝備的主要來源
- **成功指標**:
  - 玩家願意收集套裝
  - 普通怪物偶爾掉裝備帶來驚喜
  - Boss 依然是核心追求目標

## 核心循環

### 功能 1: 套裝系統

```
[裝備單件] → [查看套裝資訊] → [收集其他部件] → [湊齊套裝] → [獲得額外加成] → [更強的戰鬥力]
     ↑                                                                              ↓
     ←←←←←←←←←←←←←←←←←←←←←←← [挑戰更難的怪物獲得更好套裝] ←←←←←←←←←←←←←←←←←←←←←←←←←
```

### 功能 2: 裝備掉落機制

```
[擊殺怪物] → [掉落判定] → [獲得裝備?] → [裝備/收集] → [變強] → [挑戰更強怪物]
                ↓
         [普通怪: 極低機率]
         [Boss: 高機率]
```

## 玩法機制

### 機制 1: 套裝定義與組成
| 項目 | 內容 |
|------|------|
| **描述** | 多件裝備組成一個套裝，穿戴越多件獲得越多額外加成 |
| **目的** | 給玩家收集目標，增加裝備深度 |
| **觸發** | 當玩家裝備套裝中的任一部件時 |
| **回饋** | 顯示套裝資訊、已收集件數、套裝加成效果 |

### 機制 2: 套裝加成階梯
| 項目 | 內容 |
|------|------|
| **描述** | 2件/3件/4件/全套分別給予不同階段的加成 |
| **目的** | 漸進式獎勵，即使沒湊齊也有部分收益 |
| **觸發** | 裝備套裝件數達到門檻時 |
| **回饋** | UI 顯示當前啟用的套裝效果 |

### 機制 3: 裝備掉落機率分層
| 項目 | 內容 |
|------|------|
| **描述** | 普通怪和 Boss 有不同的裝備掉落機率 |
| **目的** | Boss 保持價值，普通怪增加驚喜 |
| **觸發** | 怪物被擊殺時 |
| **回饋** | 掉落裝備時特殊提示（金色文字） |

### 機制 4: 裝備品質分級
| 項目 | 內容 |
|------|------|
| **描述** | 裝備分為 普通/精良/稀有/傳說 等級 |
| **目的** | 區分裝備價值，套裝通常是稀有或以上 |
| **觸發** | 獲得裝備時 |
| **回饋** | 不同品質用不同顏色顯示 |

## 數值設計

### 套裝加成設計

| 套裝名稱 | 部位數 | 2件效果 | 3件效果 | 4件/全套效果 |
|---------|-------|--------|--------|-------------|
| 史萊姆套裝 (新手) | 3件 | HP+20 | MP+15 | 全屬性+2 |
| 森林獵人套裝 | 4件 | 攻擊+5 | 敏捷+5 | 攻擊+10, 暴擊+5% |
| 死靈法師套裝 | 4件 | 智力+8 | MP+50 | 魔法傷害+15% |

### 裝備掉落機率設計

| 怪物類型 | 裝備掉落基礎機率 | 說明 |
|---------|-----------------|------|
| 普通怪 (Lv 1-5) | 0.5% | 極低，但有驚喜感 |
| 普通怪 (Lv 6-10) | 1% | 稍高一點 |
| 普通怪 (Lv 11+) | 2% | 高等級區域略高 |
| Boss | 30-100% | 根據 Boss 等級和裝備稀有度 |

### 裝備品質機率（當確定掉落裝備時）

| 品質 | 普通怪機率 | Boss 機率 | 顏色 |
|------|-----------|----------|------|
| 普通 (Common) | 70% | 10% | 白色 |
| 精良 (Uncommon) | 25% | 30% | 綠色 |
| 稀有 (Rare) | 4.5% | 45% | 藍色 |
| 傳說 (Legendary) | 0.5% | 15% | 紫色 |

### 套裝加成公式

```
總屬性 = 基礎屬性 + 裝備屬性 + 套裝加成
套裝加成 = Σ(已啟用的階段加成)
```

## 玩家體驗設計

### 情緒曲線
```
體驗強度
    ↑
    │            ╭──╮ (湊齊套裝!)
    │    ╭─╮    ╱    ╲
    │   ╱   ╲  ╱      ╲
    │  ╱     ╲╯ (差一件)╲
    │ ╱ (掉裝備!)         ╲
    │╱
    └──────────────────────→ 時間
      首件  收集中  即將完成  完成
```

### 新手體驗
- **首次接觸**: 在新手村 Boss「史萊姆王」掉落第一件套裝部件
- **學習曲線**: 透過裝備提示了解套裝系統
- **引導方式**: 裝備時顯示「這是 XXX 套裝的一部分」

### 進階體驗
- **深度玩法**: 根據職業選擇適合的套裝
- **精通目標**: 收集多套套裝，根據情況切換

## 與其他系統互動

```
graph LR
    A[套裝系統] --> B[裝備系統]
    A --> C[戰鬥系統]
    D[掉落系統] --> A
    E[怪物系統] --> D
    B --> C
```

| 系統 | 互動類型 | 說明 |
|------|---------|------|
| 裝備系統 | 擴展 | 新增套裝 ID 和品質欄位 |
| 戰鬥系統 | 輸出到 | 套裝加成影響傷害計算 |
| 掉落系統 | 接收從 | 決定掉落哪件裝備 |
| 怪物系統 | 接收從 | IsBoss 決定掉落機率 |

## 風險評估

| 風險 | 機率 | 影響 | 緩解方式 |
|------|------|------|---------|
| 套裝太強導致平衡問題 | 中 | 高 | 數值謹慎設計，可調整 |
| 普通怪掉率太低無感 | 中 | 中 | 掉落時用金色特效強調 |
| 套裝收集太難 | 低 | 中 | 分層加成讓部分收集也有價值 |

---

## 📋 給 SpecKit 的輸入（Step 2 使用）

> ⚠️ 以下內容將直接作為 `/speckit.specify` 的輸入

**功能名稱**: 套裝系統與裝備掉落機制

**功能描述**:
為遊戲裝備系統增加「套裝」概念，讓玩家可以收集同一套裝的多個部件來獲得額外加成。同時改進怪物掉落機制，讓普通怪物也有極低機率掉落裝備（增加驚喜感），而 Boss 則保持較高的裝備掉落率作為主要裝備來源。

**使用者操作**:
1. 裝備套裝部件：玩家裝備一件屬於套裝的裝備時，UI 顯示套裝資訊
2. 查看套裝效果：在裝備詳情中查看套裝名稱、所需部件、各階段加成
3. 啟用套裝加成：當裝備的套裝件數達到門檻（2件/3件等），自動啟用對應加成
4. 擊殺怪物獲得裝備：普通怪 0.5-2% 機率、Boss 30-100% 機率掉落裝備
5. 裝備品質識別：不同品質裝備顯示不同顏色（白/綠/藍/紫）

**數值規格**:
- 套裝加成門檻：2件、3件、4件（全套）
- 普通怪裝備掉落率：0.5%（Lv1-5）、1%（Lv6-10）、2%（Lv11+）
- Boss 裝備掉落率：30-100%（依 Boss 等級和裝備稀有度）
- 裝備品質：Common（白）、Uncommon（綠）、Rare（藍）、Legendary（紫）
- 品質掉落機率（普通怪）：70% / 25% / 4.5% / 0.5%
- 品質掉落機率（Boss）：10% / 30% / 45% / 15%

**邊界情況**:
- 當玩家脫下套裝部件時 → 重新計算套裝加成，可能降階或失去加成
- 當同一件裝備屬於多個套裝時 → 目前不支援，每件裝備只屬於一個套裝
- 當背包已滿時掉落裝備 → 顯示「背包已滿，無法拾取 XXX」
- 當怪物沒有設定可掉落裝備時 → 走原有掉落表邏輯，不額外掉裝備

**成功標準**:
- 套裝加成正確計算並反映在戰鬥中
- 裝備 UI 正確顯示套裝資訊和品質顏色
- 普通怪和 Boss 的裝備掉落率符合設計
- 現有的掉落系統（材料、藥水）不受影響
